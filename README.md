# ボタンの振る舞い

CanvasLayerの表示順が、優先して適用されます。

CanvasLayerが無いか、同じCanvasLayer内のコントロールは、シーンツリーの下側から優先されます。画面を覆うコントロールがボタンより下にあった場合、ボタンをクリックしたり、タップすることができなくなります。ControlのZ Indexによる表示順の変更は、操作に影響しません。

画面が覆われている間はクリックやタップができないようにして、覆いが解除されたらクリックできるのは一般的な動作です。
このような動作をさせるなら、画面を覆うコントロールをボタンより下に配置するのは妥当です。
画面の覆いが解除されたら、クリックやタップを有効にすれば良いです。

コントロールがクリックやタップを遮る動作を無効にするには、次のような方法があります。

1. 画面を覆うコントロールの位置を、シーンツリーでボタンより上にする
2. 画面を覆うコントロールのMouse設定のFilterプロパティを、Ignoreにする
3. 画面を覆うコントロールのVisibleを無効にする
4. 画面を覆うコントロールが不要になったら、シーンツリーから削除する

シーンツリーの場所を変更したり、削除したりして、並びが変わるのは、あまり気持ちよくありません。
Godotでは、シーンツリーの優先順位が様々な要因と絡んでいます。想定した並び順にしておいて、並び替えはしたくない気がします。
Mouse設定とVisibleのいずれかが良さそうです。

コントロールが表示されている状態で、クリックやタップを遮らないようにするならMouseのFilter設定が良いでしょう。
コントロールが消えるなら、Visibleを無効にするのが確実そうです。
Visibleを無効にすれば、描画処理などもキャンセルされると思いますので、効率が良さそうです。
当たり判定があるGUIについては、Z Indexは使わずシーンツリーの並び順で制御した方が良さそうです。そうすることで、標準と処理内容が一致します。
警告が出るのはこれが理由なのですね。

NodeのProcessモードですべての機能がオフにできないかと思ったのですが、これはゲームの一時停止機能のためのものでした。
_process, _physics_process, _input, _input_eventが呼ばれなくなるだけで、その他の機能はシグナルも含めて動きます。
今回は関係ありませんでした。

